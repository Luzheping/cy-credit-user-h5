{"version":3,"sources":["webpack:///./src/views/personCenter/modPhone.vue?74dc","webpack:///./src/api/modPhone.js","webpack:///src/views/personCenter/modPhone.vue","webpack:///./src/views/personCenter/modPhone.vue?a959","webpack:///./src/views/personCenter/modPhone.vue?4eab","webpack:///./src/views/personCenter/modPhone.vue?543c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","on","handleChange","scrollVal","model","value","callback","$$v","phone","expression","handleGetCode","slot","_v","_s","btnContent","verifyCode","imgCode","staticStyle","pic","handleVerify","directives","name","rawName","handleSubmit","flag","staticRenderFns","api","querySendSms","params","axios","request","url","method","queryVerify","postSave","data","time","mounted","methods","vm","myreg","cellPhone","test","disabled","timer","content","position","duration","setTimeout","clearTimeout","imageCode","res","code","console","log","component"],"mappings":"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","file":"js/chunk-90fe6dd8.0a009c5b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modPhone\"},[_c('md-field',[_c('md-input-item',{ref:\"name\",attrs:{\"preview-type\":\"text\",\"title\":\"新手机号\",\"placeholder\":\"请输入手机号\",\"maxlength\":\"11\",\"is-title-latent\":\"\"},on:{\"change\":_vm.handleChange,\"blur\":_vm.scrollVal},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}},[_c('div',{staticClass:\"ft4\",attrs:{\"slot\":\"right\"},on:{\"click\":_vm.handleGetCode},slot:\"right\"},[_vm._v(_vm._s(_vm.btnContent))])]),_c('md-input-item',{ref:\"name\",attrs:{\"preview-type\":\"text\",\"title\":\"短信验证码\",\"placeholder\":\"请输入短信验证码\",\"is-title-latent\":\"\"},on:{\"change\":_vm.handleChange,\"blur\":_vm.scrollVal},model:{value:(_vm.verifyCode),callback:function ($$v) {_vm.verifyCode=$$v},expression:\"verifyCode\"}}),_c('md-input-item',{ref:\"name\",attrs:{\"preview-type\":\"text\",\"title\":\"图形验证码\",\"placeholder\":\"请输入图形验证码\",\"is-title-latent\":\"\"},on:{\"change\":_vm.handleChange,\"blur\":_vm.scrollVal},model:{value:(_vm.imgCode),callback:function ($$v) {_vm.imgCode=$$v},expression:\"imgCode\"}},[_c('img',{staticStyle:{\"width\":\"80px\"},attrs:{\"slot\":\"right\",\"src\":_vm.pic},on:{\"click\":_vm.handleVerify},slot:\"right\"})])],1),_c('md-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.flag),expression:\"flag\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交修改\")]),_c('md-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.flag),expression:\"!flag\"}],staticClass:\"btn-g\",attrs:{\"type\":\"primary\"}},[_vm._v(\"提交修改\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 首页\nimport axios from '@/libs/http'\n// import { BXFQ } from '@/api/server'\nlet api = ''\n\nexport const querySendSms = params => {\n  return axios.request({\n    url: api + '/common/sendSms',\n    method: 'get',\n    params\n  })\n}\n\nexport const queryVerify = params => {\n  return axios.request({\n    url: api + '/common/get/verify',\n    method: 'get',\n    params\n  })\n}\n\nexport const postSave = params => {\n  return axios.request({\n    url: api + '/user/update/phone',\n    method: 'get',\n    params\n  })\n}\n","<template>\n  <div class='modPhone'>\n    <md-field>\n      <md-input-item ref=\"name\" preview-type=\"text\" v-model=\"phone\" title=\"新手机号\" placeholder=\"请输入手机号\" maxlength=\"11\" is-title-latent @change=\"handleChange\" @blur=\"scrollVal\">\n        <div class=\"ft4\" slot=\"right\" @click=\"handleGetCode\">{{btnContent}}</div>\n      </md-input-item>\n      <md-input-item ref=\"name\" preview-type=\"text\" v-model=\"verifyCode\" title=\"短信验证码\" placeholder=\"请输入短信验证码\" is-title-latent @change=\"handleChange\" @blur=\"scrollVal\"></md-input-item>\n      <md-input-item ref=\"name\" preview-type=\"text\" v-model=\"imgCode\" title=\"图形验证码\" placeholder=\"请输入图形验证码\" is-title-latent @change=\"handleChange\" @blur=\"scrollVal\">\n        <img slot=\"right\" :src=\"pic\" @click=\"handleVerify\" style=\"width:80px;\" />\n      </md-input-item>\n    </md-field>\n    <md-button type=\"primary\" @click=\"handleSubmit\" v-show=\"flag\">提交修改</md-button>\n    <md-button type=\"primary\" class=\"btn-g\" v-show=\"!flag\">提交修改</md-button>\n  </div>\n</template>\n\n<script>\nimport { scrollTo } from '@/libs/utils'\nimport { Toast } from 'mand-mobile'\nimport { querySendSms, queryVerify, postSave } from '@/api/modPhone'\nexport default {\n  name: 'ModPhone',\n  data() {\n    return {\n      phone: '',\n      verifyCode: '',\n      imgCode: '',\n      flag: false,\n      btnContent: '获取验证码',\n      time: 0,\n      pic: ''\n    }\n  },\n  mounted() {\n    this.handleVerify()\n  },\n  methods: {\n    scrollVal() {\n      scrollTo()\n    },\n    handleChange() {\n      let vm = this\n      if (vm.phone && vm.verifyCode && vm.imgCode) {\n        vm.flag = true\n        return\n      }\n      vm.flag = false\n    },\n    handleVerify() {\n      queryVerify({})\n        .then(res => {\n          if (res.code === 200) {\n            var data = res.data\n            this.pic = data\n          }\n        })\n    },\n    // 点击获取验证码\n    handleGetCode() {\n      var vm = this\n      var myreg = /^[1][3-9][0-9]{9}$/\n      var params = {\n        cellPhone: vm.phone\n      }\n      if (!vm.phone) {\n        Toast({\n          content: '手机号码不能为空',\n          position: 'bottom',\n          duration: 3000\n        })\n        return\n      }\n      if (!myreg.test(vm.phone)) {\n        Toast({\n          content: '手机号码格式错误',\n          position: 'bottom',\n          duration: 3000\n        })\n        return\n      }\n      if (this.disabled) {\n        return\n      }\n      querySendSms(params)\n        .then(res => {\n          if (res.status === 200) {\n            var data = res.data\n            Toast({\n              content: data.message,\n              position: 'bottom',\n              duration: 3000\n            })\n          }\n        })\n      this.time = 60\n      this.timer()\n    },\n    // 定时器\n    timer() {\n      if (this.time > 0) {\n        this.time--\n        this.btnContent = this.time + 's后重新获取'\n        this.disabled = true\n        var timer = setTimeout(this.timer, 1000)\n      } else if (this.time === 0) {\n        this.btnContent = '获取验证码'\n        clearTimeout(timer)\n        this.disabled = false\n      }\n    },\n    handleSubmit() {\n      let vm = this\n      let myreg = /^[1][3-9][0-9]{9}$/\n      let params = {\n        phone: vm.phone,\n        verifyCode: vm.verifyCode,\n        imageCode: vm.imgCode\n      }\n      if (!myreg.test(vm.phone)) {\n        Toast({\n          content: '手机号码格式错误',\n          position: 'bottom',\n          duration: 3000\n        })\n        return\n      }\n      postSave(params).then(res => {\n        if (res.code === 200) {\n          let data = res.data\n          console.log(data)\n          this.$router.push('/personCenter')\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n.modPhone {\n  height: 100%;\n  background: #fff;\n  .ft4 {\n    font-size: 12px;\n    color: #3077ff;\n  }\n  .md-button {\n    width: 320px;\n    border-radius: 2px;\n  }\n  .btn-g {\n    background: rgba(0, 122, 255, 1);\n    opacity: 0.3;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modPhone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modPhone.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./modPhone.vue?vue&type=template&id=b8a9fa8a&scoped=true&\"\nimport script from \"./modPhone.vue?vue&type=script&lang=js&\"\nexport * from \"./modPhone.vue?vue&type=script&lang=js&\"\nimport style0 from \"./modPhone.vue?vue&type=style&index=0&id=b8a9fa8a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b8a9fa8a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modPhone.vue?vue&type=style&index=0&id=b8a9fa8a&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./modPhone.vue?vue&type=style&index=0&id=b8a9fa8a&scoped=true&lang=less&\""],"sourceRoot":""}